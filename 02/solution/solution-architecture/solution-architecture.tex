The processor architecture is a MIPS-inspired pipelined architecture with five stages.
The five stages are called Instruction Fetch, Instruction Decode, Execution, Memory and Write Back.
Each stage is separated by pipeline registers that hold the relevant data for the different stages between clock cycles.
With a pipelined design, the processor is vulnerable to data hazards and control hazards \todo{explain what hazards are somewhere?}.
The processor resolves hazards by using a combination of data forwarding and stalling.
One type of hazard, the use-after-load\cn hazard is not handled by the processor, and trying to execute an instruction which uses the result from a load immediately after the load instruction results in undefined behaviour.
Instead of handling this in hardware, the bundled solution assembler solves this issue by instruction reordering, or simply inserting nops where needed.

The processor architecture is modeled after the Harvard Architecture design, which means that it has separate instruction and data memory.
This, in addition to being a security boon, makes for a more performant design, as the instruction memory and data can be accessed independantly.
This is aligned with the performance design goal.
This removes the need for a central memory access arbitrage unit, which increases the simplicty of the design in accordance to the design goals\cn.

The processor architecture can bee seen illustrated in figure \vref{figure:architecture}.
The tall orange bars are the pipeline registers.
The blue lines are control signals.

\begin{figure}[H]
    \includegraphics[width=\textwidth]{illustrations/processor.pdf}
    \caption{The processor architecture}
    \label{figure:architecture}
\end{figure}


The rest of this section describes the different architectural subcomponents in detail.

\subsection{Instruction Fetch Stage}
    \input{solution/solution-architecture/if-stage/if-stage.tex}

\subsection{Instruction Decode Stage}
    \input{solution/solution-architecture/id-stage/id-stage.tex}

\subsection{Execution Stage}
    \input{solution/solution-architecture/ex-stage/ex-stage.tex}

\subsection{Memory Stage}
    \input{solution/solution-architecture/mem-stage/mem-stage.tex}

\subsection{Write-Back Stage}
    \input{solution/solution-architecture/wb-stage/wb-stage.tex}

\subsection{Additional Components}
    \input{solution/solution-architecture/additional-components/additional-components.tex}
